{"version":3,"sources":["src/server/permissions/checkers/AppSchedulerBridge.ts"],"names":[],"mappings":";;;AACA,8EAA2E;AAC3E,8EAA2E;AAC3E,sDAAmD;AAEtC,QAAA,kBAAkB,GAAG;IAC9B,oBAAoB,CAAC,KAAa;QAC9B,IAAI,CAAC,2CAAoB,CAAC,aAAa,CAAC,KAAK,EAAE,+BAAc,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;YAC9E,MAAM,IAAI,6CAAqB,CAAC;gBAC5B,KAAK;gBACL,kBAAkB,EAAE,CAAC,+BAAc,CAAC,SAAS,CAAC,OAAO,CAAC;aACzD,CAAC,CAAC;SACN;IACL,CAAC;IACD,kBAAkB,CAAC,SAA4B,EAAE,KAAa;QAC1D,OAAO,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;IAC5C,CAAC;IACD,YAAY,CAAC,GAAqB,EAAE,KAAa;QAC7C,OAAO,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;IAC5C,CAAC;IACD,iBAAiB,CAAC,GAAuB,EAAE,KAAa;QACpD,OAAO,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;IAC5C,CAAC;IACD,SAAS,CAAC,KAAa,EAAE,KAAa;QAClC,OAAO,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;IAC5C,CAAC;IACD,aAAa,CAAC,KAAa,IAAU,CAAC;CACzC,CAAC","file":"AppSchedulerBridge.js","sourcesContent":["import { IOnetimeSchedule, IProcessor, IRecurringSchedule } from '../../../definition/scheduler';\nimport { PermissionDeniedError } from '../../errors/PermissionDeniedError';\nimport { AppPermissionManager } from '../../managers/AppPermissionManager';\nimport { AppPermissions } from '../AppPermissions';\n\nexport const AppSchedulerBridge = {\n    hasGeneralPermission(appId: string) {\n        if (!AppPermissionManager.hasPermission(appId, AppPermissions.scheduler.default)) {\n            throw new PermissionDeniedError({\n                appId,\n                missingPermissions: [AppPermissions.scheduler.default],\n            });\n        }\n    },\n    registerProcessors(processor: Array<IProcessor>, appId: string): void {\n        return this.hasGeneralPermission(appId);\n    },\n    scheduleOnce(job: IOnetimeSchedule, appId: string): void {\n        return this.hasGeneralPermission(appId);\n    },\n    scheduleRecurring(job: IRecurringSchedule, appId: string): void {\n        return this.hasGeneralPermission(appId);\n    },\n    cancelJob(jobId: string, appId: string): void {\n        return this.hasGeneralPermission(appId);\n    },\n    cancelAllJobs(appId: string): void { },\n};\n"]}